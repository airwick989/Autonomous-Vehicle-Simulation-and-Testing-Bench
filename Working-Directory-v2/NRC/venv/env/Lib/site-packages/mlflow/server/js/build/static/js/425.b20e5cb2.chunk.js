"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[425],{46425:function(e,t,r){r.r(t),r.d(t,{ExperimentPage:function(){return rn},default:function(){return nn}});var n=r(14585),a=r(32048),s=r(4519),o=r(50284),i=r(37850),l=r(28928);const c=l.I0;var d=r(77537);const u=(0,s.createContext)(null),p=e=>{let{children:t,actions:r}=e;const[n,l]=(0,s.useState)([]),[p,m]=(0,s.useState)(!1),[h,g]=(0,s.useState)(null),f=c(),y=(0,s.useCallback)((e=>{g(null),(()=>{const t=e.map((e=>{const t=r.getExperimentApi(e);return f(t).catch((e=>{i.Z.logErrorAndNotifyUser(e)})),t.meta.id}));l((e=>(0,a.isEqual)(t,e)?e:t))})()}),[r,f]),v=(0,s.useMemo)((()=>({fetchExperiments:y,isLoadingExperiment:p,requestError:h,actions:r})),[r,y,p,h]);return(0,d.tZ)(u.Provider,{value:v,children:(0,d.tZ)(o.ZP,{shouldOptimisticallyRender:!0,requestIds:n,children:(e,r,a)=>(m(a.some((e=>n.includes(e.id)&&e.active))),h||a.forEach((e=>{e.error&&g(e.error)})),t)})})};var m=r(66314),h=r(67437),g=r(9394),f=r(26155);var y=r.p+"static/media/permission-denied-lock.16036747d57cd663d7df223781a447b2.svg";function v(e){let{errorMessage:t}=e;const{theme:r}=(0,m.mrf)();return(0,d.BX)("div",{className:"center",children:[(0,d.tZ)("img",{style:{height:300,marginTop:80},src:y,alt:"permission denied"}),(0,d.tZ)("h1",{style:{paddingTop:10},children:"Permission Denied"}),(0,d.tZ)("h2",{"data-testid":"error-message",css:(0,f.iv)({color:r.colors.textSecondary},""),children:t||"The current user does not have permission to view this page."})]})}var b=r(91994);const Z=e=>{let{artifactLocation:t}=e;return(0,d.tZ)(d.HY,{children:t})},x=s.memo((e=>{let{experiment:t}=e;return(0,d.BX)("div",{css:C.container,children:[(0,d.BX)(m.ZT$.Text,{color:"secondary",children:[(0,d.tZ)(b.Z,{id:"PZGZHV",defaultMessage:"Experiment ID"}),": ",t.experiment_id]}),(0,d.BX)(m.ZT$.Text,{color:"secondary",children:[(0,d.tZ)(b.Z,{id:"8/7V3S",defaultMessage:"Artifact Location"}),": ",(0,d.tZ)(Z,{artifactLocation:t.artifact_location})]})]})})),C={container:e=>({display:"flex",gap:e.spacing.lg})};var S=r(83934),R=r(2664),E=r(29709),k=r(24374);const w=()=>{const e=(0,s.useContext)(u);if(!e)throw new Error("Trying to use GetExperimentsContext actions outside of the context!");return e},B=s.memo((e=>{let{experiment:t}=e;const r=(0,l.v9)((e=>{const r=(0,E.aq)(t.experiment_id,e);return r?(e=>{var t;return(null===(t=Object.values(e).find((e=>e.getKey()===k._)))||void 0===t?void 0:t.value)||void 0})(r):""})),[n,a]=(0,s.useState)(!1),{actions:{setExperimentTagApi:o}}=w(),i=c(),u=(0,s.useCallback)((e=>{const r=o(t.experiment_id,k._,e);i(r).then((()=>a(!1)))}),[t.experiment_id,o,i]);return(0,d.tZ)(S.a,{title:(0,d.BX)("span",{css:T.collapsibleSectionHeader,children:[(0,d.tZ)(b.Z,{id:"wDwAdX",defaultMessage:"Description"})," ",!n&&(0,d.tZ)(m.zxk,{type:"link",onClick:()=>a(!0),children:(0,d.tZ)(b.Z,{id:"2YEXRM",defaultMessage:"Edit"})})]}),forceOpen:n,defaultCollapsed:!r,"data-test-id":"experiment-notes-section",children:(0,d.tZ)(R.U,{defaultMarkdown:r,onSubmit:u,onCancel:()=>a(!1),showEditor:n})})})),T={collapsibleSectionHeader:{height:"32px",lineHeight:"32px"}};var I=r(983);const M="showTrackingHelper",L=s.memo((()=>{const e=(t=h.NW,(0,s.useMemo)((()=>I.Z.getStoreForComponent("ExperimentView",t)),[t]));var t;const r=(0,s.useCallback)((()=>{e.setItem(M,"false")}),[e]);return"false"!==e.getItem(M)?(0,d.BX)(d.HY,{children:[(0,d.tZ)(m.bZj,{message:(0,d.tZ)(b.Z,{id:"YLvpXM",defaultMessage:"Track machine learning training runs in experiments. <link>Learn more</link>",values:{link:e=>(0,d.tZ)("a",{href:h.Sr,target:"_blank",rel:"noopener noreferrer",children:e})}}),type:"info",closable:!0,onClose:r}),(0,d.tZ)(m.LZC,{})]}):null}));var D=r(98750),A=r(12187),N=r(40869);function O(){var e=s.useContext(A._y);return(0,N.lq)(e),e}const _=e=>{let{experiment:t}=e;const r=O();return(0,d.tZ)(m.ZT$.Text,{size:"xl",dangerouslySetAntdProps:{copyable:{text:t.name,icon:(0,d.tZ)(m.TIy,{}),tooltips:[r.formatMessage({id:"A7R0ii",defaultMessage:"Copy path"}),r.formatMessage({id:"JCboZ7",defaultMessage:"Path copied"})]}}})},P=e=>{let{copyText:t}=e;const[r,n]=(0,s.useState)(!1);return(0,d.tZ)(m.ua7,{title:(0,d.tZ)(b.Z,{id:"X+boXI",defaultMessage:"Copied"}),dangerouslySetAntdProps:{visible:r},children:(0,d.tZ)(m.zxk,{type:"primary",onClick:()=>{navigator.clipboard.writeText(t),n(!0),setTimeout((()=>{n(!1)}),3e3)},onMouseLeave:()=>{n(!1)},children:(0,d.tZ)(b.Z,{id:"1Iq+NW",defaultMessage:"Copy"})})})};var U={name:"490tlg",styles:"display:flex;gap:4px"};const $=e=>{let{copyText:t}=e;return(0,d.BX)("div",{css:U,children:[(0,d.tZ)(m.IIB,{readOnly:!0,value:t,"data-test-id":"copy-box"}),(0,d.tZ)(P,{copyText:t})]})},X=e=>{let{visible:t,onCancel:r,link:n}=e;return(0,d.tZ)(m.u_l,{title:(0,d.tZ)(b.Z,{id:"ktiuki",defaultMessage:"Get Link"}),visible:t,onCancel:r,children:(0,d.tZ)($,{copyText:n})})},K=()=>{var e;const[t,r]=(0,s.useState)(!1);return(0,d.BX)(d.HY,{children:[(0,d.tZ)(X,{link:(null===(e=window.top)||void 0===e?void 0:e.location.href)||window.location.href,visible:t,onCancel:()=>r(!1)}),(0,d.tZ)(m.zxk,{type:"primary",onClick:()=>r(!0),"data-test-id":"share-button",children:(0,d.tZ)(b.Z,{id:"2oFAO4",defaultMessage:"Share"})})]})},F=s.memo((e=>{let{experiment:t}=e;const r=(0,s.useMemo)((()=>t.name.split("/").pop()),[t.name]);return(0,d.tZ)(D.mr,{title:(0,d.BX)(d.HY,{children:[r," ",(0,d.tZ)(_,{experiment:t})]}),breadcrumbs:[],children:(0,d.tZ)(K,{})})})),z=s.memo((e=>{let{experiments:t}=e;const r=(0,s.useMemo)((()=>(0,d.tZ)(b.Z,{id:"Dhn7Mb",defaultMessage:"Displaying Runs from {numExperiments} Experiments",values:{numExperiments:t.length}})),[t.length]);return(0,d.tZ)(D.mr,{title:r,breadcrumbs:[],children:(0,d.tZ)(K,{})})}));let V,W;!function(e){e.ACTIVE="Active",e.DELETED="Deleted"}(V||(V={})),function(e){e.WITH_MODEL_VERSIONS="With Model Versions",e.WTIHOUT_MODEL_VERSIONS="Without Model Versions",e.ALL_RUNS="All Runs"}(W||(W={}));var H=r(2010);const j=(e,t)=>{const{experiments:r}=t,n=r.map((e=>e.experiment_id)),a=n.length>1,s=Object.values(e.entities.runInfosByUuid).filter((e=>{let{experiment_id:t}=e;return n.includes(t)})).map((e=>{let{run_uuid:t}=e;return t})),{modelVersionsByRunUuid:o,runUuidsMatchingFilter:i}=e.entities,l=((e,t,r)=>{let{lifecycleFilter:n=V.ACTIVE,modelVersionFilter:a=W.ALL_RUNS}=r;const{modelVersionsByRunUuid:s}=t.entities;return e.map((e=>(0,E.hQ)(e,t))).filter((e=>n===V.ACTIVE?"active"===e.lifecycle_stage:"deleted"===e.lifecycle_stage)).filter((e=>a===W.ALL_RUNS||(a===W.WITH_MODEL_VERSIONS?e.run_uuid in s:a===W.WTIHOUT_MODEL_VERSIONS?!(e.run_uuid in s):(console.warn("Invalid input to model version filter - defaulting to showing all runs."),!0))))})(s,e,t),c=new Set,d=new Set,u=l.map((t=>{const r=(0,H.nQ)(t.run_uuid,e),n=Object.values(r||{});return n.forEach((e=>{c.add(e.key)})),n})),p=l.map((t=>{const r=Object.values((0,E.Qf)(t.run_uuid,e));return r.forEach((e=>{d.add(e.key)})),r})),m=l.map((t=>(0,E.Ml)(t.run_uuid,e))),h=n[0];return{modelVersionsByRunUuid:o,experimentTags:a?{}:(0,E.aq)(h,e),runInfos:l,paramsList:p,tagsList:m,metricsList:u,runUuidsMatchingFilter:i,metricKeyList:Array.from(c.values()).sort(),paramKeyList:Array.from(d.values()).sort()}};var q=r(46285);class Y extends s.Component{handleSortBy(){const{canonicalSortKey:e,orderByAsc:t,orderByKey:r}=this.props;let n=!t;e!==r&&(n=!1),this.props.onSortBy(e,n)}render(){const{enableSorting:e,canonicalSortKey:t,displayName:r,getClassName:n=(()=>""),orderByKey:a,orderByAsc:s}=this.props;return(0,d.BX)("div",{role:"columnheader",css:G.headerLabelWrapper(e),className:n(t),onClick:e?()=>this.handleSortBy():void 0,children:[(0,d.tZ)("span",{"data-test-id":`sort-header-${r}`,children:r}),e&&t===a?s?(0,d.tZ)(m.TV4,{}):(0,d.tZ)(m.mcG,{}):null]})}}const G={headerLabelWrapper:e=>t=>({height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 12px",svg:{color:t.colors.textSecondary},"&:hover":{color:e?t.colors.actionTertiaryTextHover:"unset",svg:{color:t.colors.actionTertiaryTextHover}}}),headerSortIcon:{marginRight:4}},Q=()=>(0,d.tZ)(m.rsQ,{css:e=>({color:e.colors.textValidationDanger})}),J=()=>(0,d.tZ)(m.OcG,{css:e=>({color:e.colors.textValidationSuccess})}),ee=e=>{switch(e){case"FAILED":case"KILLED":return(0,d.tZ)(Q,{});case"FINISHED":return(0,d.tZ)(J,{});case"SCHEDULED":return(0,d.tZ)(m.T39,{});default:return null}},te=s.memo((e=>{let{value:{startTime:t,referenceTime:r,runStatus:n}}=e;return(0,d.BX)("span",{css:re.cellWrapper,title:i.Z.formatTimestamp(t),children:[ee(n),i.Z.timeSinceStr(t,r)]})})),re={cellWrapper:e=>({display:"flex",alignItems:"center",gap:e.spacing.sm,svg:{width:14,height:14}})};var ne=r(17032),ae=r(86509);const se=s.memo((e=>{let{data:t,value:r}=e;return(0,d.tZ)(ne.rU,{to:ae.Z.getExperimentPageRoute(t.experimentId),title:r.name,children:r.basename})})),oe=e=>{let{text:t,maxSize:r,className:n,allowShowMore:a=!1}=e;if(t.length<=r)return(0,d.tZ)("span",{className:n,children:t});const o=`${t.substr(0,r)}...`,[i,l]=(0,s.useState)(!1);return(0,d.BX)("span",{className:n,children:[i?t:o,a&&(0,d.tZ)(m.zxk,{type:"link",onClick:()=>l(!i),size:"small",css:ie.expandButton,"data-test-id":"trimmed-text-button",children:i?"collapse":"expand"})]})},ie={expandButton:{display:"inline-block"}};var le=r.p+"static/media/logged-model.dd9b21ff4fb07f3cadeada8046a2693b.svg";var ce=r.p+"static/media/registered-model.24429a4f6158e57b01b3928e2605aa25.svg",de=r(2166);const ue=s.memo((e=>{const{registeredModels:t,loggedModels:r,experimentId:n,runUuid:a}=e.value,s=i.Z.mergeLoggedAndRegisteredModels(r,t);if(s&&s.length){const e=s[0];let t;if(e.registeredModelName){const{registeredModelName:r,registeredModelVersion:n}=e;t=(0,d.BX)(d.HY,{children:[(0,d.tZ)("img",{"data-test-id":"registered-model-icon",alt:"",title:"Registered Model",src:ce}),(0,d.BX)("a",{href:i.Z.getIframeCorrectedRoute((0,de.u5)(r,n)),className:"registered-model-link",target:"_blank",rel:"noreferrer",children:[(0,d.tZ)(oe,{text:r,maxSize:10,className:"model-name"}),`/${n}`]})]})}else if(e.flavors){const r=e.flavors?e.flavors[0]:"Model",s=i.Z.getIframeCorrectedRoute(`${ae.Z.getRunPageRoute(n,a)}/artifactPath/${e.artifactPath}`);t=(0,d.BX)(d.HY,{children:[(0,d.tZ)("img",{"data-test-id":"logged-model-icon",alt:"",title:"Logged Model",src:le}),(0,d.tZ)("a",{href:s,target:"_blank",className:"logged-model-link",children:r})]})}return(0,d.BX)("div",{className:"logged-model-cell",css:pe.imageWrapper,children:[t,r.length>1?`, ${r.length-1} more`:""]})}return(0,d.tZ)(d.HY,{children:"-"})})),pe={imageWrapper:{img:{height:"15px",position:"relative",marginRight:"4px"}}},me=s.memo((e=>{let{value:t}=e;const r=i.Z.renderSource(t,void 0,void 0);return r?(0,d.BX)(d.HY,{children:[i.Z.renderSourceTypeIcon(t),r]}):(0,d.tZ)(d.HY,{children:"-"})})),he=s.memo((e=>{let{value:{version:t,name:r,type:n}}=e;return i.Z.renderSourceVersion(t,r,n)||(0,d.tZ)(d.HY,{children:"-"})}));var ge=r(62632);const{formatTimestamp:fe,getDuration:ye,getRunNameFromTags:ve,getSourceType:be,getSourceName:Ze,getUser:xe}=i.Z,Ce=e=>e.reduce(((e,t)=>({...e,[t.key]:t})),{}),Se=e=>void 0===e?"":/[,"\r\n]/.test(e)?'"'+e.replace(/"/g,'""')+'"':e,Re=e=>{const{runInfos:t,paramKeyList:r,metricKeyList:n,tagKeyList:a,paramsList:s,metricsList:o,tagsList:i}=e;return((e,t)=>{let r,n="";for(r=0;r<e.length;r++)n+=Se(e[r]),r<e.length-1&&(n+=",");for(n+="\n",r=0;r<t.length;r++){for(let e=0;e<t[r].length;e++)n+=Se(t[r][e]),e<t[r].length-1&&(n+=",");n+="\n"}return n})(["Start Time","Duration","Run ID","Name","Source Type","Source Name","User","Status",...r,...n,...a],t.map(((e,t)=>{const l=[fe(e.start_time),ye(e.start_time,e.end_time)||"",e.run_uuid,e.run_name||ve(i[t]),be(i[t]),Ze(i[t]),xe(e,i[t]),e.status],c=Ce(s[t]),d=Ce(o[t]),u=i[t];return r.forEach((e=>{c[e]?l.push(c[e].value):l.push("")})),n.forEach((e=>{d[e]?l.push(d[e].value):l.push("")})),a.forEach((e=>{u[e]?l.push(u[e].value):l.push("")})),l})))},Ee="$$$param$$$",ke="$$$metric$$$",we="$$$tag$$$",Be="mlflow.parentRunId",Te=s.memo((e=>e.data.pinnable?(0,d.tZ)(m.ua7,{placement:"right",title:e.value?(0,d.tZ)(b.Z,{id:"ugm2f6",defaultMessage:"Unpin run"}):(0,d.tZ)(b.Z,{id:"/Rt/Lj",defaultMessage:"Click to pin the run"}),children:(0,d.BX)("label",{css:Ie.pinWrapper,children:[(0,d.tZ)("input",{type:"checkbox",checked:e.value,onChange:()=>{e.onTogglePin(e.data.runUuid)}}),e.value?(0,d.tZ)(m.D$V,{}):(0,d.tZ)(m.qKU,{})]})}):null)),Ie={pinWrapper:e=>({input:{width:0,appearance:"none"},cursor:"pointer",display:"flex",svg:{width:14,height:14,cursor:"pointer",color:"transparent"},".ag-row-hover & svg":{color:e.colors.grey600},"input:checked + span svg":{color:e.colors.grey600}})},Me=s.memo((e=>{let{onExpand:t,data:{runName:r,experimentId:n,runUuid:a,runDateAndNestInfo:s}}=e;const{hasExpander:o,expanderOpen:i,childrenIds:l,level:c}=s||{},u=!isNaN(c)&&o;return(0,d.BX)("div",{css:Le.cellWrapper,children:[(0,d.tZ)("div",{css:Le.expanderWrapper,children:(0,d.tZ)("div",{css:Le.nestLevel(c),children:u&&(0,d.tZ)(m.zxk,{css:Le.expanderButton,size:"small",onClick:()=>{t(a,l)},type:"link",icon:i?(0,d.tZ)(m.uSo,{}):(0,d.tZ)(m.IAe,{})},"Expander-"+a)})}),(0,d.tZ)(ne.rU,{to:ae.Z.getRunPageRoute(n,a),children:r})]})})),Le={link:e=>({display:"inline-block",minWidth:e.typography.fontSizeBase,minHeight:e.typography.fontSizeBase}),cellWrapper:{display:"flex"},expanderButton:{svg:{width:12,height:12}},expanderWrapper:{display:"none",".ag-grid-expanders-visible &":{display:"block"}},nestLevel:e=>t=>({display:"flex",justifyContent:"flex-end",width:(e+1)*t.spacing.lg,height:t.general.heightSm})},De=(e,t)=>e+".`"+t+"`",Ae=(e,t)=>e.startsWith(t),Ne=e=>`$$$param$$$-${e}`,Oe=e=>`$$$metric$$$-${e}`,_e=e=>`$$$tag$$$-${e}`,Pe={[q.XZ.USER]:De(q.D5.ATTRIBUTES,"User"),[q.XZ.RUN_NAME]:De(q.D5.ATTRIBUTES,"Run Name"),[q.XZ.SOURCE]:De(q.D5.ATTRIBUTES,"Source"),[q.XZ.VERSION]:De(q.D5.ATTRIBUTES,"Version")},Ue=e=>{let{data:t}=e;return t.runUuid},$e=[q.z.USER,q.z.SOURCE,q.z.VERSION,q.z.MODELS],Xe=[q.z.EXPERIMENT_NAME,...$e],Ke=e=>{let{searchFacetsState:t,onSortBy:r,compareExperiments:n,onTogglePin:o,onExpand:l,paramKeyList:c,metricKeyList:d,tagKeyList:u,columnApi:p,isComparingRuns:m}=e;const{orderByAsc:h,orderByKey:g,selectedColumns:f}=t,y=(e=>{let{paramKeyList:t,metricKeyList:r,tagKeyList:n}=e;const a=(0,s.useRef)(new Set),o=(0,s.useRef)(new Set),i=(0,s.useRef)(new Set),l=(0,s.useMemo)((()=>(t.forEach((e=>o.current.add(e))),Array.from(o.current))),[t]),c=(0,s.useMemo)((()=>(r.forEach((e=>a.current.add(e))),Array.from(a.current))),[r]),d=(0,s.useMemo)((()=>(n.forEach((e=>i.current.add(e))),Array.from(i.current))),[n]);return(0,s.useMemo)((()=>({paramKeys:l,metricKeys:c,tagKeys:d})),[c,l,d])})({metricKeyList:d,tagKeyList:u,paramKeyList:c}),v=(0,s.useMemo)((()=>{const e={orderByKey:g,orderByAsc:h,onSortBy:r},t=e=>e===g?"is-ordered-by":void 0,s=e=>t(e),c=e=>{let{colDef:r}=e;return t(r.headerComponentParams.canonicalSortKey)},d=[];if(d.push({field:"pinned",checkboxSelection:!0,headerName:"",headerCheckboxSelection:!0,cellClass:"is-checkbox-cell",cellRenderer:"PinRowCellRenderer",cellRendererParams:{onTogglePin:o},pinned:"left",minWidth:70,width:70,maxWidth:70,resizable:!1}),d.push({headerName:q.z.RUN_NAME,colId:Pe[q.XZ.RUN_NAME],headerTooltip:q.XZ.RUN_NAME,pinned:"left",sortable:!0,field:"runDateAndNestInfo",cellRenderer:"RunNameCellRenderer",cellRendererParams:{onExpand:l},equals:(e,t)=>(0,a.isEqual)(e,t),headerComponentParams:{...e,canonicalSortKey:q.XZ.RUN_NAME,getClassName:s},cellClass:c,initialWidth:260,resizable:!m}),m)return d;d.push({headerName:q.z.DATE,headerTooltip:q.XZ.DATE,pinned:"left",sortable:!0,field:"runDateAndNestInfo",cellRenderer:"DateCellRenderer",cellRendererParams:{onExpand:l},equals:(e,t)=>(0,a.isEqual)(e,t),headerComponentParams:{...e,canonicalSortKey:q.XZ.DATE,getClassName:s},cellClass:c,initialWidth:150}),d.push({headerName:q.z.DURATION,field:"duration",initialWidth:80,cellClass:c}),n&&d.push({headerName:q.z.EXPERIMENT_NAME,colId:De(q.D5.ATTRIBUTES,q.z.EXPERIMENT_NAME),field:"experimentName",cellRenderer:"ExperimentNameCellRenderer",equals:(e,t)=>(0,a.isEqual)(e,t),initialWidth:140,cellClass:c,initialHide:!0}),d.push({headerName:q.z.USER,colId:Pe[q.XZ.USER],headerTooltip:q.XZ.USER,field:"user",sortable:!0,headerComponentParams:{...e,canonicalSortKey:q.XZ.USER,getClassName:s},cellClass:c,initialHide:!0}),d.push({headerName:q.z.SOURCE,colId:Pe[q.XZ.SOURCE],field:"tags",cellRenderer:"SourceCellRenderer",equals:(e,t)=>i.Z.getSourceName(e)===i.Z.getSourceName(t),sortable:!0,headerComponentParams:{...e,canonicalSortKey:q.XZ.SOURCE,getClassName:s},cellClass:c,initialHide:!0}),d.push({headerName:q.z.VERSION,colId:Pe[q.XZ.VERSION],field:"version",cellRenderer:"VersionCellRenderer",equals:(e,t)=>(0,a.isEqual)(e,t),sortable:!0,headerComponentParams:{...e,canonicalSortKey:q.XZ.VERSION,getClassName:s},cellClass:c,initialHide:!0}),d.push({headerName:q.z.MODELS,colId:De(q.D5.ATTRIBUTES,q.z.MODELS),field:"models",cellRenderer:"ModelsCellRenderer",initialWidth:200,equals:(e,t)=>(0,a.isEqual)(e,t),initialHide:!0});const{metricKeys:u,paramKeys:p,tagKeys:f}=y;return u.length&&d.push({headerName:"Metrics",colId:q.D5.METRICS,children:u.map((t=>{const r=De(q.D5.METRICS,t);return{headerName:t,colId:r,headerTooltip:r,field:Oe(t),tooltipField:Oe(t),initialWidth:100,initialHide:!0,sortable:!0,headerComponentParams:{...e,canonicalSortKey:r,getClassName:s},cellClass:c}}))}),p.length&&d.push({headerName:"Parameters",colId:q.D5.PARAMS,children:p.map((t=>{const r=De(q.D5.PARAMS,t);return{colId:r,headerName:t,headerTooltip:r,field:Ne(t),tooltipField:Ne(t),initialHide:!0,initialWidth:100,sortable:!0,headerComponentParams:{...e,canonicalSortKey:r,getClassName:s},cellClass:c}}))}),f.length&&d.push({headerName:"Tags",colId:q.D5.TAGS,children:f.map((e=>{const t=De(q.D5.TAGS,e);return{colId:t,headerName:e,initialHide:!0,initialWidth:100,headerTooltip:t,field:_e(e),tooltipField:_e(e)}}))}),d}),[g,h,r,o,l,n,y,m]),b=(0,s.useMemo)((()=>[...Xe.map((e=>De(q.D5.ATTRIBUTES,e))),...y.paramKeys.map((e=>De(q.D5.PARAMS,e))),...y.metricKeys.map((e=>De(q.D5.METRICS,e))),...y.tagKeys.map((e=>De(q.D5.TAGS,e)))]),[y]);return(0,s.useEffect)((()=>{if(p&&!m)for(const e of b){const t=f.includes(e);p.setColumnVisible(e,t)}}),[f,p,b,m]),v},Fe={initialWidth:100,autoSizePadding:0,headerComponentParams:{menuIcon:"fa-bars"},resizable:!0,filter:!0,suppressMenu:!0,suppressMovable:!0};var ze=r(76082),Ve=r(13e3);class We extends s.Component{constructor(e){super(e),this.handleSubmit=this.handleSubmit.bind(this)}handleSubmit(){const e=[];return this.props.selectedRunIds.forEach((t=>{e.push(this.props.deleteRunApi(t))})),Promise.all(e).catch((()=>{this.props.openErrorModal("While deleting an experiment run, an error occurred.")}))}render(){const e=this.props.selectedRunIds.length;return(0,d.tZ)(Ve.s,{isOpen:this.props.isOpen,onClose:this.props.onClose,handleSubmit:this.handleSubmit,title:`Delete Experiment ${i.Z.pluralize("Run",e)}`,helpText:(0,d.BX)("div",{children:[(0,d.tZ)("p",{children:(0,d.BX)("b",{children:[e," experiment ",i.Z.pluralize("run",e)," will be deleted."]})}),""]}),confirmButtonText:"Delete"})}}const He={deleteRunApi:n.Gd,openErrorModal:n.yQ};var je=(0,l.$j)(null,He)(We),qe=r(11616);class Ye extends s.Component{constructor(e){super(e),this.handleSubmit=this.handleSubmit.bind(this)}handleSubmit(){const e=[];return this.props.selectedRunIds.forEach((t=>{e.push(this.props.restoreRunApi(t))})),Promise.all(e).catch((e=>{this.props.openErrorModal("While restoring an experiment run, an error occurred.")}))}render(){const e=this.props.selectedRunIds.length;return(0,d.tZ)(Ve.s,{isOpen:this.props.isOpen,onClose:this.props.onClose,handleSubmit:this.handleSubmit,title:`Restore Experiment ${i.Z.pluralize("Run",e)}`,helpText:`${e} experiment ${i.Z.pluralize("run",e)} will be restored.`,confirmButtonText:"Restore"})}}const Ge={restoreRunApi:n.Y1,openErrorModal:n.yQ};var Qe=(0,l.$j)(null,Ge)(Ye),Je=r(22637),et=r.n(Je);const tt=()=>{var e;const t=(0,ze.$B)(),r=(0,ze.TH)(),n=(0,s.useMemo)((()=>decodeURIComponent(r.search)),[r.search]),a=(0,s.useMemo)((()=>{const e=et().parse(n.substring(1));if(e.experiments){const t=e.experiments;return(null===t||void 0===t?void 0:t.toString())||""}return""}),[n]);return(0,s.useMemo)((()=>{var e,r;if(null!==(e=t.params)&&void 0!==e&&e.experimentId)return[null===(r=t.params)||void 0===r?void 0:r.experimentId];if(a)try{return JSON.parse(a)}catch{return i.Z.logErrorAndNotifyUser(`Could not parse experiment query parameter ${a}`),""}return[]}),[a,null===(e=t.params)||void 0===e?void 0:e.experimentId])};var rt=r(29009),nt=r(25272);const at={ALL:null,LAST_HOUR:36e5,LAST_24_HOURS:864e5,LAST_7_DAYS:6048e5,LAST_30_DAYS:2592e6,LAST_YEAR:31104e6},st=(e,t)=>!(0,a.isEqual)(e.searchFilter,t.searchFilter)||!(0,a.isEqual)(e.orderByAsc,t.orderByAsc)||!(0,a.isEqual)(e.orderByKey,t.orderByKey)||!(0,a.isEqual)(e.lifecycleFilter,t.lifecycleFilter)||!(0,a.isEqual)(e.startTime,t.startTime),ot=(e,t,r,n)=>{const a=t.lifecycleFilter===V.ACTIVE?nt.bW.ACTIVE_ONLY:nt.bW.DELETED_ONLY,{runsPinned:s}=t,o=(e=>{let{orderByKey:t,orderByAsc:r}=e;return t?r?[t+" ASC"]:[t+" DESC"]:[]})(t),i=((e,t)=>{let{startTime:r}=e;const n=at[r];return r&&n&&"ALL"!==r?"attributes.start_time >= "+(t-n):null})(t,r),l=((e,t)=>{let{searchFilter:r}=e;return r&&t?`${r} and ${t}`:!r&&t?t:r||void 0})(t,i);return{experimentIds:e,filter:l,runViewType:a,orderBy:o,shouldFetchParents:(e=>{let{orderByKey:t,searchFilter:r}=e;return!t&&!r||t===q.XZ.DATE})(t),pageToken:n,runsPinned:s}},it=(e,t,r)=>{const n=e.filter((e=>e.data.tags.some((e=>"mlflow.log-model.history"===e.key))));(0,a.chunk)(n,rt.mc).forEach((e=>{const n=t({run_id:e.map((e=>e.info.run_id))});r(n)}))},lt=[De(q.D5.ATTRIBUTES,q.z.SOURCE),De(q.D5.ATTRIBUTES,q.z.MODELS)];class ct{constructor(){this.searchFilter="",this.orderByKey=q.gB,this.orderByAsc=q.yG,this.startTime=q.wi,this.lifecycleFilter=q.FJ,this.modelVersionFilter=q.oj,this.selectedColumns=[...lt],this.runsExpanded={},this.runsPinned=[],this.isComparingRuns=!1,this.compareRunCharts=[]}}const dt=Object.keys(new ct),ut=(e,t,r,n)=>{if("value"===n){if("true"===e)return!0;if("false"===e)return!1;if(void 0===e)return""}return t(e)},pt=(e,t)=>Object.assign(new ct,{...e,...t});function mt(e,t){const r=e;I.Z.getStoreForComponent("ExperimentPage",t).saveComponentState(r)}function ht(e){const t=e;return et().stringify(t,{addQueryPrefix:!0,arrayFormat:"comma",encodeValuesOnly:!0})}function gt(e,t){let r=new ct;try{const e=I.Z.getStoreForComponent("ExperimentPage",t).loadComponentState();if((!(n=e).runsExpanded||(0,a.isObject)(n.runsExpanded))&&(!n.selectedColumns||(0,a.isArray)(n.selectedColumns))){r=pt(r,e)}}catch{i.Z.logErrorAndNotifyUser(`Error: malformed persisted search state for experiment(s) ${t}`)}var n;const s=decodeURIComponent(e),o=et().parse(s,{ignoreQueryPrefix:!0,comma:!0,arrayLimit:500,decoder:ut}),{restData:l,stateData:c}=function(e){const t={},r={};for(const n in e)if(e.hasOwnProperty(n)){const a=dt.includes(n);Object.assign(a?t:r,{[n]:e[n]})}return{stateData:t,restData:r}}(o),d=c;if(!(Object.keys(d).length<1)){const e=Object.assign(new ct,d);r=pt(r,e)}return mt(r,t),r.isComparingRuns=!1,{state:r,queryString:ht({...l,...r})}}const ft=(0,s.createContext)(null),yt=e=>{let{children:t,actions:r}=e;const n=(0,ze.k6)(),l=tt(),u=c(),[p,m]=(0,s.useState)(""),[h,g]=(0,s.useState)(!1),[f,y]=(0,s.useState)(!1),[v,b]=(0,s.useState)(null),Z=(0,s.useMemo)((()=>JSON.stringify(l.sort())),[l]),[x,C]=(0,s.useState)((()=>{const{queryString:e,state:t}=gt(n.location.search,Z);return n.location.search!==e&&n.replace(`${n.location.pathname}${e}`),t})),S=(0,s.useRef)(""),R=(0,s.useRef)(""),E=(0,s.useRef)(!0),k=(0,s.useCallback)((()=>E.current),[]),w=(0,s.useCallback)((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),a=arguments.length>3?arguments[3]:void 0;const s=Boolean(a);s||(R.current=n);const o=s?r.loadMoreRunsApi:r.searchRunsApi,l=o(ot(t,e,n,a||void 0));g(!0),u(l).then((e=>{let{value:t}=e;S.current=t.next_page_token,y(Boolean(t.next_page_token)),it(t.runs||[],r.searchModelVersionsApi,u)})).catch((e=>{i.Z.logErrorAndNotifyUser(e)})),m(l.meta.id)}),[u,r]),B=(0,s.useCallback)((()=>{w(x,l,R.current||void 0,S.current||void 0)}),[w,x,l]),T=(0,s.useCallback)((()=>{w(x,l)}),[l,w,x]),I=(0,s.useCallback)((e=>{const t=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const n=et().parse(r,{ignoreQueryPrefix:!0,comma:!0,arrayLimit:500,decoder:ut}),{experiments:a}=n;return mt(e,t),ht({experiments:a,...e})}(e,Z,n.location.search);n.location.search!==t&&n.push(`${n.location.pathname}${t}`)}),[n,Z]),M=(0,s.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{forceRefresh:r=!1,preservePristine:n=!1}=t;C((t=>{const n=(0,a.isFunction)(e)?e(t):{...t,...e};return(r||st(t,n))&&w(n,l),I(n),n})),n||(E.current=!1)}),[l,w,I]);(0,s.useEffect)((()=>n.listen(((e,t)=>{if("POP"===t){const{state:t}=gt(e.search,Z);M(t)}}))),[n,Z,M]);const L=(0,s.useMemo)((()=>({actions:r,searchFacetsState:x,fetchExperimentRuns:T,updateSearchFacets:M,loadMoreRuns:B,requestError:v,isLoadingRuns:h,moreRunsAvailable:f,isPristine:k})),[r,x,T,B,v,h,M,f,k]);return(0,d.tZ)(ft.Provider,{value:L,children:(0,d.tZ)(o.ZP,{shouldOptimisticallyRender:!0,requestIds:p?[p]:[],children:(e,r,n)=>(g(n.some((e=>e.id===p&&e.active))),n.forEach((e=>{e.error&&b(e.error)})),t)})})},vt=()=>{const e=(0,s.useContext)(ft);if(!e)throw new Error("Trying to use SearchExperimentRunsContext actions outside of the context!");return e},bt=e=>{let{showDeleteRunModal:t,showRestoreRunModal:r,showRenameRunModal:n,runsSelected:a,onCloseDeleteRunModal:o,onCloseRestoreRunModal:i,onCloseRenameRunModal:l,renamedRunName:c}=e;const{updateSearchFacets:u}=vt(),p=Object.entries(a).filter((e=>{let[,t]=e;return t})).map((e=>{let[t]=e;return t})),m=(0,s.useCallback)((()=>u({},{forceRefresh:!0,preservePristine:!0})),[u]);return(0,d.BX)(d.HY,{children:[(0,d.tZ)(je,{isOpen:t,onClose:o,selectedRunIds:p}),(0,d.tZ)(Qe,{isOpen:r,onClose:i,selectedRunIds:p}),(0,d.tZ)(qe.UQ,{runUuid:p[0],onClose:l,runName:c,isOpen:n,onSuccess:()=>m()})]})},Zt=s.memo((e=>{let{viewState:t,runsData:r,searchFacetsState:n,updateSearchFacets:a,visibleRowsCount:o}=e;const{runsSelected:i}=t,{runInfos:l}=r,{lifecycleFilter:c,startTime:u}=n,p=(0,ze.k6)(),h=O(),g=(0,s.useMemo)((()=>(e=>({ALL:e.formatMessage({id:"a/TbnY",defaultMessage:"All time"}),LAST_HOUR:e.formatMessage({id:"bjoGjg",defaultMessage:"Last hour"}),LAST_24_HOURS:e.formatMessage({id:"JChRnq",defaultMessage:"Last 24 hours"}),LAST_7_DAYS:e.formatMessage({id:"eQsXm7",defaultMessage:"Last 7 days"}),LAST_30_DAYS:e.formatMessage({id:"p1H1KR",defaultMessage:"Last 30 days"}),LAST_YEAR:e.formatMessage({id:"EI7moF",defaultMessage:"Last year"})}))(h)),[h]),[f,y]=(0,s.useState)(!1),[v,Z]=(0,s.useState)(!1),[x,C]=(0,s.useState)(!1),[S,R]=(0,s.useState)(""),E=(0,s.useCallback)((()=>{const e=Object.keys(i),t=l.find((t=>t.run_uuid===e[0]));t&&(R(t.run_name),C(!0))}),[l,i]),k=(0,s.useCallback)((()=>{const e=Object.keys(i),t=l.filter((t=>{let{run_uuid:r}=t;return e.includes(r)})).map((e=>{let{experiment_id:t}=e;return t}));p.push(ae.Z.getCompareRunPageRoute(e,[...new Set(t)].sort()))}),[p,l,i]),w=(0,s.useCallback)((()=>y(!0)),[]),B=(0,s.useCallback)((()=>Z(!0)),[]),T=(0,s.useCallback)((()=>y(!1)),[]),I=(0,s.useCallback)((()=>Z(!1)),[]),M=(0,s.useCallback)((()=>C(!1)),[]),L=Object.values(t.runsSelected).filter(Boolean).length,D=L>0,A=1===L,N=L>1,_=N||A||D,P=(0,d.BX)(d.HY,{children:[(0,d.tZ)(b.Z,{id:"OGWg8l",defaultMessage:"State:"})," ",c]}),U=(0,d.BX)(d.HY,{children:[(0,d.tZ)(b.Z,{id:"+fb25b",defaultMessage:"Time created"}),": ",g[u]]});return(0,d.BX)("div",{css:xt.controlBar,children:[(0,d.tZ)(bt,{runsSelected:i,onCloseRenameRunModal:M,onCloseDeleteRunModal:T,onCloseRestoreRunModal:I,showDeleteRunModal:f,showRestoreRunModal:v,showRenameRunModal:x,renamedRunName:S}),!_&&(0,d.BX)(d.HY,{children:[(0,d.tZ)(m.PhF,{className:"start-time-select",value:{value:u,label:U},labelInValue:!0,onChange:e=>{let{value:t}=e;a({startTime:t})},"data-test-id":"start-time-select-dropdown",dangerouslySetAntdProps:{virtual:!1},children:Object.keys(g).map((e=>(0,d.tZ)(m.Wxm,{title:g[e],"data-test-id":`start-time-select-${e}`,value:e,children:g[e]},e)))}),(0,d.BX)(m.PhF,{value:{value:c,label:P},labelInValue:!0,"data-testid":"lifecycle-filter",onChange:e=>{let{value:t}=e;return a({lifecycleFilter:t})},children:[(0,d.tZ)(m.PhF.Option,{"data-testid":"active-runs-menu-item",value:q.VW.ACTIVE,children:(0,d.tZ)(b.Z,{id:"0pdAuV",defaultMessage:"Active"})}),(0,d.tZ)(m.PhF.Option,{"data-testid":"deleted-runs-menu-item",value:q.VW.DELETED,children:(0,d.tZ)(b.Z,{id:"yJpGwW",defaultMessage:"Deleted"})})]})]}),_&&(0,d.BX)(d.HY,{children:[(0,d.tZ)(m.zxk,{"data-testid":"runs-compare-button",disabled:!N,onClick:k,children:(0,d.tZ)(b.Z,{id:"RaGnOQ",defaultMessage:"Compare"})}),(0,d.tZ)(m.zxk,{"data-testid":"run-rename-button",onClick:E,disabled:!A,children:(0,d.tZ)(b.Z,{id:"oWPgX7",defaultMessage:"Rename"})}),c===q.VW.ACTIVE?(0,d.tZ)(m.zxk,{"data-testid":"runs-delete-button",disabled:!D,onClick:w,danger:!0,children:(0,d.tZ)(b.Z,{id:"3Rb4sG",defaultMessage:"Delete"})}):null,c===q.VW.DELETED?(0,d.tZ)(m.zxk,{"data-testid":"runs-restore-button",disabled:!D,onClick:B,children:(0,d.tZ)(b.Z,{id:"Potju2",defaultMessage:"Restore"})}):null]}),(0,d.tZ)("div",{css:xt.groupSeparator}),(0,d.tZ)("div",{children:(0,d.tZ)(b.Z,{id:"sHMQzu",defaultMessage:"Showing {length} matching {length, plural, =0 {runs} =1 {run} other {runs}}",values:{length:o}})})]})})),xt={groupSeparator:()=>({flex:1}),controlBar:e=>({display:"flex",gap:e.spacing.sm,alignItems:"center",paddingTop:e.spacing.sm,borderTop:`1px solid ${e.colors.border}`})};var Ct=r(17564),St=r(4942),Rt=r(71002),Et=r(87462),kt=r(58804),wt=r(43270),Bt=r.n(wt),Tt=r(25831),It=r(90690),Mt=r(29439);function Lt(e){var t,r=e.prefixCls,n=e.value,a=e.current,o=e.offset,i=void 0===o?0:o;return i&&(t={position:"absolute",top:"".concat(i,"00%"),left:0}),s.createElement("span",{style:t,className:Bt()("".concat(r,"-only-unit"),{current:a})},n)}function Dt(e,t,r){for(var n=e,a=0;(n+10)%10!==t;)n+=r,a+=r;return a}function At(e){var t,r,n=e.prefixCls,a=e.count,o=e.value,i=Number(o),l=Math.abs(a),c=s.useState(i),d=(0,Mt.Z)(c,2),u=d[0],p=d[1],m=s.useState(l),h=(0,Mt.Z)(m,2),g=h[0],f=h[1],y=function(){p(i),f(l)};if(s.useEffect((function(){var e=setTimeout((function(){y()}),1e3);return function(){clearTimeout(e)}}),[i]),u===i||Number.isNaN(i)||Number.isNaN(u))t=[s.createElement(Lt,(0,Et.Z)({},e,{key:i,current:!0}))],r={transition:"none"};else{t=[];for(var v=i+10,b=[],Z=i;Z<=v;Z+=1)b.push(Z);var x=b.findIndex((function(e){return e%10===u}));t=b.map((function(t,r){var n=t%10;return s.createElement(Lt,(0,Et.Z)({},e,{key:t,value:n,offset:r-x,current:r===x}))})),r={transform:"translateY(".concat(-Dt(u,i,g<l?1:-1),"00%)")}}return s.createElement("span",{className:"".concat(n,"-only"),style:r,onTransitionEnd:y},t)}var Nt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},Ot=function(e){var t=e.prefixCls,r=e.count,n=e.className,a=e.motionClassName,o=e.style,i=e.title,l=e.show,c=e.component,d=void 0===c?"sup":c,u=e.children,p=Nt(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),m=(0,s.useContext(Tt.E_).getPrefixCls)("scroll-number",t),h=(0,Et.Z)((0,Et.Z)({},p),{"data-show":l,style:o,className:Bt()(m,n,a),title:i}),g=r;if(r&&Number(r)%1===0){var f=String(r).split("");g=f.map((function(e,t){return s.createElement(At,{prefixCls:m,count:Number(r),value:e,key:f.length-t})}))}return o&&o.borderColor&&(h.style=(0,Et.Z)((0,Et.Z)({},o),{boxShadow:"0 0 0 1px ".concat(o.borderColor," inset")})),u?(0,It.Tm)(u,(function(e){return{className:Bt()("".concat(m,"-custom-component"),null===e||void 0===e?void 0:e.className,a)}})):s.createElement(d,h,g)},_t=r(71235);function Pt(e){return-1!==_t.Y.indexOf(e)}var Ut=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},$t=function(e){var t,r,n=e.prefixCls,a=e.scrollNumberPrefixCls,o=e.children,i=e.status,l=e.text,c=e.color,d=e.count,u=void 0===d?null:d,p=e.overflowCount,m=void 0===p?99:p,h=e.dot,g=void 0!==h&&h,f=e.size,y=void 0===f?"default":f,v=e.title,b=e.offset,Z=e.style,x=e.className,C=e.showZero,S=void 0!==C&&C,R=Ut(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","showZero"]),E=s.useContext(Tt.E_),k=E.getPrefixCls,w=E.direction,B=k("badge",n),T=u>m?"".concat(m,"+"):u,I=null!==i&&void 0!==i||null!==c&&void 0!==c,M="0"===T||0===T,L=g&&!M||I,D=L?"":T,A=(0,s.useMemo)((function(){return(null===D||void 0===D||""===D||M&&!S)&&!L}),[D,M,S,L]),N=(0,s.useRef)(u);A||(N.current=u);var O=N.current,_=(0,s.useRef)(D);A||(_.current=D);var P=_.current,U=(0,s.useRef)(L);A||(U.current=L);var $=(0,s.useMemo)((function(){if(!b)return(0,Et.Z)({},Z);var e={marginTop:b[1]};return"rtl"===w?e.left=parseInt(b[0],10):e.right=-parseInt(b[0],10),(0,Et.Z)((0,Et.Z)({},e),Z)}),[w,b,Z]),X=null!==v&&void 0!==v?v:"string"===typeof O||"number"===typeof O?O:void 0,K=A||!l?null:s.createElement("span",{className:"".concat(B,"-status-text")},l),F=O&&"object"===(0,Rt.Z)(O)?(0,It.Tm)(O,(function(e){return{style:(0,Et.Z)((0,Et.Z)({},$),e.style)}})):void 0,z=Bt()((t={},(0,St.Z)(t,"".concat(B,"-status-dot"),I),(0,St.Z)(t,"".concat(B,"-status-").concat(i),!!i),(0,St.Z)(t,"".concat(B,"-status-").concat(c),Pt(c)),t)),V={};c&&!Pt(c)&&(V.background=c);var W=Bt()(B,(r={},(0,St.Z)(r,"".concat(B,"-status"),I),(0,St.Z)(r,"".concat(B,"-not-a-wrapper"),!o),(0,St.Z)(r,"".concat(B,"-rtl"),"rtl"===w),r),x);if(!o&&I){var H=$.color;return s.createElement("span",(0,Et.Z)({},R,{className:W,style:$}),s.createElement("span",{className:z,style:V}),s.createElement("span",{style:{color:H},className:"".concat(B,"-status-text")},l))}return s.createElement("span",(0,Et.Z)({},R,{className:W}),o,s.createElement(kt.Z,{visible:!A,motionName:"".concat(B,"-zoom"),motionAppear:!1},(function(e){var t,r=e.className,n=k("scroll-number",a),o=U.current,l=Bt()((t={},(0,St.Z)(t,"".concat(B,"-dot"),o),(0,St.Z)(t,"".concat(B,"-count"),!o),(0,St.Z)(t,"".concat(B,"-count-sm"),"small"===y),(0,St.Z)(t,"".concat(B,"-multiple-words"),!o&&P&&P.toString().length>1),(0,St.Z)(t,"".concat(B,"-status-").concat(i),!!i),(0,St.Z)(t,"".concat(B,"-status-").concat(c),Pt(c)),t)),d=(0,Et.Z)({},$);return c&&!Pt(c)&&((d=d||{}).background=c),s.createElement(Ot,{prefixCls:n,show:!A,motionClassName:r,className:l,count:P,title:X,style:d,key:"scrollNumber"},F)})),K)};$t.Ribbon=function(e){var t,r=e.className,n=e.prefixCls,a=e.style,o=e.color,i=e.children,l=e.text,c=e.placement,d=void 0===c?"end":c,u=s.useContext(Tt.E_),p=u.getPrefixCls,m=u.direction,h=p("ribbon",n),g=Pt(o),f=Bt()(h,"".concat(h,"-placement-").concat(d),(t={},(0,St.Z)(t,"".concat(h,"-rtl"),"rtl"===m),(0,St.Z)(t,"".concat(h,"-color-").concat(o),g),t),r),y={},v={};return o&&!g&&(y.background=o,v.color=o),s.createElement("div",{className:"".concat(h,"-wrapper")},i,s.createElement("div",{className:f,style:(0,Et.Z)((0,Et.Z)({},y),a)},s.createElement("span",{className:"".concat(h,"-text")},l),s.createElement("div",{className:"".concat(h,"-corner"),style:v})))};var Xt=$t;const Kt=s.memo((e=>{let{runInfos:t}=e;const{actions:{searchRunsPayload:r},updateSearchFacets:n}=vt(),a=tt(),[o,i]=(0,s.useState)(0),[l,c]=(0,s.useState)(0),u=(0,s.useCallback)((()=>n({},{forceRefresh:!0,preservePristine:!0})),[n]);return(0,s.useEffect)((()=>{c(0),i((()=>Date.now()))}),[t]),(0,s.useEffect)((()=>{if(!o)return;const e=setInterval((()=>{const e={experimentIds:a,filter:`attributes.start_time > ${o}`,maxResults:q.mz};r(e).then((e=>{var t;const r=(null===(t=e.runs)||void 0===t?void 0:t.length)||0;c(r)}))}),q.FK);return()=>clearInterval(e)}),[o,r,a]),(0,d.tZ)(Xt,{count:l,offset:[-5,5],css:Ft.pill,overflowCount:q.mz-1,children:(0,d.tZ)(m.zxk,{onClick:u,"data-testid":"runs-refresh-button",icon:(0,d.tZ)(m.bnu,{}),children:(0,d.tZ)(b.Z,{id:"ag05Pe",defaultMessage:"Refresh"})})})})),Ft={pill:e=>({sup:{backgroundColor:e.colors.lime,zIndex:1}})},zt=(0,l.$j)((e=>({runInfos:e.entities.runInfosByUuid})),void 0,void 0,{areStatesEqual:(e,t)=>e.entities===t.entities})(Kt),Vt="GROUP",Wt=De(Vt,q.D5.ATTRIBUTES),Ht=De(Vt,q.D5.PARAMS),jt=De(Vt,q.D5.METRICS),qt=De(Vt,q.D5.TAGS),Yt=[q.z.USER,q.z.SOURCE,q.z.VERSION,q.z.MODELS],Gt=[q.z.EXPERIMENT_NAME,...Yt],Qt=(e,t)=>e.filter((e=>e.toLowerCase().includes(t.toLowerCase()))),Jt=(e,t)=>{if(!t)return e;const r=e.toLowerCase().indexOf(t.toLowerCase()),n=e.substring(0,r),a=e.substring(r,r+t.length),s=e.substring(r+t.length);return r>-1?(0,d.BX)("span",{children:[n,(0,d.tZ)("strong",{children:a}),s]}):e},er=s.memo((e=>{let{runsData:t,columnSelectorVisible:r,onChangeColumnSelectorVisible:n,updateSearchFacets:a,selectedColumns:o}=e;const l=tt(),[c,u]=(0,s.useState)(""),p=(0,s.useRef)(null),h=(0,s.useRef)(null),g=(0,s.useRef)(null),f=(0,s.useMemo)((()=>l.length>1?Gt:Yt),[l.length]),y=(0,s.useCallback)((e=>a((t=>{const r=e(t.selectedColumns),n=Array.from(new Set(r));return{...t,selectedColumns:n}}))),[a]),v=(0,s.useMemo)((()=>i.Z.getVisibleTagKeyList(t.tagsList)),[t]),Z=(0,s.useMemo)((()=>({[q.D5.ATTRIBUTES]:f.map((e=>De(q.D5.ATTRIBUTES,e))),[q.D5.PARAMS]:t.paramKeyList.map((e=>De(q.D5.PARAMS,e))),[q.D5.METRICS]:t.metricKeyList.map((e=>De(q.D5.METRICS,e))),[q.D5.TAGS]:v.map((e=>De(q.D5.TAGS,e)))})),[t,f,v]),x=(0,s.useMemo)((()=>{const e=[],r=Qt(f,c),n=Qt(t.paramKeyList,c),a=Qt(t.metricKeyList,c),s=Qt(v,c);return r.length&&e.push({key:Wt,title:"Attributes",children:r.map((e=>({key:De(q.D5.ATTRIBUTES,e),title:Jt(e,c)})))}),a.length&&e.push({key:jt,title:`Metrics (${a.length})`,children:a.map((e=>({key:De(q.D5.METRICS,e),title:Jt(e,c)})))}),n.length&&e.push({key:Ht,title:`Parameters (${n.length})`,children:n.map((e=>({key:De(q.D5.PARAMS,e),title:Jt(e,c)})))}),s.length&&e.push({key:qt,title:`Tags (${s.length})`,children:s.map((e=>({key:De(q.D5.TAGS,e),title:e})))}),e}),[f,c,t,v]),C=(0,s.useCallback)(((e,t)=>{y(e?e=>e.filter((e=>!t.includes(e))):e=>[...e,...t])}),[y]),S=(0,s.useCallback)(((e,t)=>{y(t?t=>t.filter((t=>t!==e)):t=>[...t,e])}),[y]);(0,s.useEffect)((()=>{r&&(u(""),requestAnimationFrame((()=>{var e,t;null===h||void 0===h||null===(e=h.current)||void 0===e||e.scrollTo(0,0),null===(t=p.current)||void 0===t||t.focus({preventScroll:!0}),g.current&&g.current.scrollIntoView({block:"nearest",behavior:"smooth"})})))}),[r]);const R=(0,s.useCallback)(((e,t)=>{let{node:{key:r,checked:n}}=t;if(Ae(r.toString(),Vt)){const e=(a=r.toString(),s=Vt,a.substring(s.length+2).slice(0,-1)),t=Z[e];t&&C(n,Qt(t,c))}else S(r.toString(),n);var a,s}),[Z,C,S,c]),E=(0,s.useCallback)((e=>{if("ArrowDown"===e.key){const e=(null===(t=h.current)||void 0===t?void 0:t.querySelector('[role="tree"] input'))||null;e&&e.focus()}var t}),[]),k=(0,d.BX)("div",{css:rr.dropdown,children:[(0,d.tZ)("div",{css:e=>({padding:e.spacing.md}),children:(0,d.tZ)(m.IIB,{value:c,prefix:(0,d.tZ)(m.vlt,{}),placeholder:"Search columns",allowClear:!0,ref:p,onChange:e=>{u(e.target.value)},onKeyDown:E})}),(0,d.tZ)("div",{ref:h,css:rr.scrollableContainer,children:(0,d.tZ)(m.mpN,{"data-testid":"column-selector-tree",mode:"checkable",dangerouslySetAntdProps:{checkedKeys:o,onCheck:R},defaultExpandedKeys:[Wt,Ht,jt,qt],treeData:x})})]});return(0,d.tZ)(m.Ltx,{overlay:k,placement:"bottomRight",trigger:["click"],visible:r,onVisibleChange:n,children:(0,d.BX)(m.zxk,{ref:g,style:{display:"flex",alignItems:"center"},"data-testid":"column-selection-dropdown",icon:(0,d.tZ)(m.DE2,{}),children:[(0,d.tZ)(b.Z,{id:"ny+fBZ",defaultMessage:"Columns"})," ",(0,d.tZ)(m.v4q,{})]})})})),tr=e=>{const{updateSearchFacets:t,searchFacetsState:r}=vt();return(0,d.tZ)(er,{...e,selectedColumns:r.selectedColumns,updateSearchFacets:t})},rr={dropdown:e=>({backgroundColor:e.colors.white,width:400,border:"1px solid",borderColor:e.colors.border}),scrollableContainer:e=>({maxHeight:480,overflowY:"scroll",overflowX:"hidden",paddingBottom:e.spacing.md,"span[title]":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})};var nr={name:"1j5vobt",styles:"display:flex;align-items:center;gap:4px"};const ar=s.memo((e=>{let{searchFacetsState:t,updateSearchFacets:r,runsData:n,viewState:a,updateViewState:o,onDownloadCsv:i,sortOptions:l}=e;const{orderByKey:c,orderByAsc:u,isComparingRuns:p}=t,[g,f]=(0,s.useState)(),y=(0,s.useCallback)((e=>{let{value:t}=e;const[n,a]=t.split(q.T_),s=Pe[n]||n,o=a===q.aU;r((e=>{const{selectedColumns:t}=e;return t.includes(s)||t.push(s),{...e,selectedColumns:t,orderByKey:n,orderByAsc:o}}))}),[r]);(0,s.useEffect)((()=>{f(t.searchFilter)}),[t]);const v=(0,s.useCallback)((()=>{const e=new ct,{selectedColumns:n,runsExpanded:a,runsPinned:s}=t;r(Object.assign(e,{runsExpanded:a,runsPinned:s,selectedColumns:n}))}),[t,r]),Z=(0,s.useCallback)((e=>o({columnSelectorVisible:e})),[o]),x=(0,s.useMemo)((()=>`${c}${q.T_}${u?q.aU:q.iX}`),[u,c]),C=(0,s.useMemo)((()=>{const e=l.find((e=>e.value===x));let t=null===e||void 0===e?void 0:e.label;if(!t){const e=c.match(/^.+\.`(.+)`$/);e&&(t=e[1])}return(0,d.BX)("span",{css:nr,children:[u?(0,d.tZ)(m.TV4,{}):(0,d.tZ)(m.mcG,{})," ",(0,d.tZ)(b.Z,{id:"llrWuc",defaultMessage:"Sort"}),": ",t]})}),[x,u,c,l]);return(0,d.tZ)(d.HY,{children:(0,d.BX)("div",{css:sr.groupBar,children:[(0,d.BX)("div",{css:sr.controlBar,children:[!1,(0,d.tZ)("div",{css:sr.searchBox,children:(0,d.tZ)(m.IIB,{value:g,prefix:(0,d.tZ)(m.vlt,{css:sr.searchBarIcon}),onKeyDown:e=>{"Enter"===e.key&&r({searchFilter:g})},onChange:e=>f(e.target.value),placeholder:'metrics.rmse < 1 and params.model = "tree"',"data-test-id":"search-box",suffix:(0,d.BX)("div",{css:sr.searchInputSuffix,children:[g&&(0,d.tZ)(m.zxk,{onClick:v,type:"link","data-test-id":"clear-button",children:(0,d.tZ)(m.Two,{})}),(0,d.tZ)(m.ua7,{title:(0,d.BX)("div",{className:"search-input-tooltip-content",children:[(0,d.tZ)(b.Z,{id:"kIlkgf",defaultMessage:"Search runs using a simplified version of the SQL {whereBold} clause.",values:{whereBold:(0,d.tZ)("b",{children:"WHERE"})}})," ",(0,d.tZ)(b.Z,{id:"nYKZy4",defaultMessage:"<link>Learn more</link>",values:{link:e=>(0,d.tZ)("a",{href:h.Kp,target:"_blank",rel:"noopener noreferrer",children:e})}}),(0,d.tZ)("br",{}),(0,d.tZ)(b.Z,{id:"U3btBc",defaultMessage:"Examples:"}),(0,d.tZ)("br",{}),"\u2022 metrics.rmse >= 0.8",(0,d.tZ)("br",{}),"\u2022 metrics.`f1 score` < 1",(0,d.tZ)("br",{}),"\u2022 params.model = 'tree'",(0,d.tZ)("br",{}),"\u2022 attributes.run_name = 'my run'",(0,d.tZ)("br",{}),"\u2022 tags.`mlflow.user` = 'myUser'",(0,d.tZ)("br",{}),"\u2022 metric.f1_score > 0.9 AND params.model = 'tree'",(0,d.tZ)("br",{}),"\u2022 attributes.run_id IN ('a1b2c3d4', 'e5f6g7h8')",(0,d.tZ)("br",{}),"\u2022 tags.model_class LIKE 'sklearn.linear_model%'"]}),placement:"right",dangerouslySetAntdProps:{overlayInnerStyle:{width:"150%"}},children:(0,d.tZ)(m.MLt,{css:sr.searchBarIcon})})]})})}),(0,d.tZ)(m.PhF,{className:"sort-select",css:sr.sortSelectControl,value:{value:x,label:C},labelInValue:!0,dangerouslySetAntdProps:{virtual:!1,dropdownStyle:sr.sortSelectDropdown},onChange:y,"data-test-id":"sort-select-dropdown",children:l.map((e=>(0,d.BX)(m.Wxm,{title:e.label,"data-test-id":`sort-select-${e.label}-${e.order}`,value:e.value,children:[(0,d.tZ)("span",{css:sr.sortMenuArrowWrapper,children:e.order===q.aU?(0,d.tZ)(m.Hf3,{}):(0,d.tZ)(m.veu,{})})," ",(0,Ct.mJ)(e.label,50)]},e.value)))}),!p&&(0,d.tZ)(tr,{columnSelectorVisible:a.columnSelectorVisible,onChangeColumnSelectorVisible:Z,runsData:n})]}),(0,d.tZ)("div",{css:sr.groupSeparator}),(0,d.BX)("div",{css:sr.controlBar,children:[(0,d.tZ)(m.Ltx,{trigger:["click"],placement:"bottomRight",overlay:(0,d.tZ)(m.v2r,{children:(0,d.BX)(m.v2r.Item,{className:"csv-button",onClick:i,children:[(0,d.tZ)(m._8t,{})," ",(0,d.tZ)(b.Z,{id:"rOnjGB",defaultMessage:"Download CSV"})]})}),children:(0,d.tZ)(m.zxk,{type:"tertiary",icon:(0,d.tZ)(m.VZO,{})})}),(0,d.tZ)(zt,{})]})]})})})),sr={groupBar:{display:"grid",gridTemplateColumns:"auto 1fr auto"},controlBar:e=>({display:"flex",gap:e.spacing.sm,alignItems:"center",flexWrap:"wrap"}),searchBarIcon:e=>({svg:{width:16,height:16,color:e.colors.textSecondary}}),groupSeparator:e=>({minWidth:e.spacing.sm}),searchInputSuffix:{display:"flex",gap:4,alignItems:"center"},columnSwitch:{margin:"5px"},searchBox:e=>({display:"flex",gap:e.spacing.sm,width:560}),sortSelectControl:{minWidth:140,maxWidth:360},lifecycleFilters:e=>({display:"flex",gap:8,alignItems:"center",marginTop:e.spacing.sm,marginBottom:e.spacing.sm,marginLeft:2*e.spacing.lg}),sortSelectDropdown:{minWidth:360},sortMenuArrowWrapper:{svg:{width:12,height:12}}},or=s.memo((e=>{let{runsData:t,viewState:r,updateViewState:n,updateSearchFacets:a,searchFacetsState:o,visibleRowsCount:l}=e;const{paramKeyList:c,metricKeyList:u,tagsList:p}=t,m=c,h=u,g=i.Z.getVisibleTagKeyList(p),f=(0,s.useCallback)((()=>((e,t,r,n)=>{const{runInfos:a,paramsList:s,metricsList:o,tagsList:i}=e,l=Re({runInfos:a,paramKeyList:r,metricKeyList:n,tagKeyList:t,paramsList:s,metricsList:o,tagsList:i}),c=new Blob([l],{type:"application/csv;charset=utf-8"});(0,ge.saveAs)(c,"runs.csv")})(t,g,m,h)),[h,m,g,t]),y=((e,t)=>(0,s.useMemo)((()=>{let r=[];const n=[q.aU,q.iX];return r=[...Object.keys(q.Ul).reduce(((e,t)=>{const r=q.Ul[t];return n.forEach((n=>{e.push({label:r,value:q.XZ[t]+q.T_+n,order:n})})),e}),[]),...e.reduce(((e,t)=>(n.forEach((r=>{e.push({label:t,value:`${De(q.D5.METRICS,t)}${q.T_}${r}`,order:r})})),e)),[]),...t.reduce(((e,t)=>(n.forEach((r=>{e.push({label:t,value:`${De(q.D5.PARAMS,t)}${q.T_}${r}`,order:r})})),e)),[])],r}),[e,t]))(h,m);return(0,d.BX)("div",{css:ir.wrapper,children:[(0,d.tZ)(ar,{onDownloadCsv:f,updateSearchFacets:a,searchFacetsState:o,viewState:r,updateViewState:n,sortOptions:y,runsData:t}),(0,d.tZ)(Zt,{runsData:t,updateSearchFacets:a,searchFacetsState:o,viewState:r,visibleRowsCount:l})]})})),ir={wrapper:e=>({display:"flex",gap:e.spacing.sm,flexDirection:"column",marginTop:e.spacing.md,marginBottom:e.spacing.sm})},lr=s.lazy((()=>Promise.all([r.e(547),r.e(869)]).then(r.bind(r,49869)))),cr=e=>(0,d.tZ)(s.Suspense,{fallback:(0,d.tZ)("div",{css:e=>({display:"flex",justifyContent:"center",margin:e.spacing.md}),children:(0,d.tZ)(m.$jN,{})}),children:(0,d.tZ)(lr,{...e})});class dr extends s.Component{constructor(){super(...arguments),this.getLearnMoreLinkUrl=()=>h.gM}render(){const e=this.getLearnMoreLinkUrl();return(0,d.tZ)("div",{className:"experiment-runs-table-empty-overlay",css:ur.wrapper,children:(0,d.tZ)("span",{children:(0,d.tZ)(b.Z,{id:"bq+LYL",defaultMessage:"No runs yet. <link>Learn more</link> about how to create ML model training {newLine} runs in this experiment.",values:{link:t=>(0,d.tZ)("a",{target:"_blank",href:e,children:t}),newLine:(0,d.tZ)("br",{})}})})})}}const ur={wrapper:{position:"relative",top:"10px",fontSize:"13px",padding:"30px",width:"100 %",pointerEvents:"all"}},pr="is-out-of-viewport",mr="is-hidden",hr="is-minimized",gr=".ag-root",fr=".ag-pinned-left-cols-container",yr=".ag-center-cols-container",vr=".ag-header",br=e=>{let{onClick:t,gridContainerElement:r,isInitialized:n,visible:a,moreAvailableParamsAndMetricsColumnCount:o=0}=e;const i=(0,s.useRef)(null),l=(0,s.useRef)(),c=(0,s.useCallback)((e=>{if(!i.current||!window.ResizeObserver||!e)return;const t=i.current,r=e.querySelector(gr),n=e.querySelector(fr),a=e.querySelector(yr),s=e.querySelector(vr);let o=0,c=0,d=0,u=0,p=0;if(n&&a&&s&&r){const e=new ResizeObserver((e=>{var i,m,h,g;for(const t of e)t.target===r&&(o=t.contentRect.width),t.target===n&&(c=t.contentRect.width,u=t.contentRect.height),t.target===s&&(p=t.contentRect.height),t.target===a&&(d=t.contentRect.width);const f=c+d,y=p;f+180>=o?null===(i=l.current)||void 0===i||i.classList.add(pr):null===(m=l.current)||void 0===m||m.classList.remove(pr);u<100?null===(h=l.current)||void 0===h||h.classList.add(hr):null===(g=l.current)||void 0===g||g.classList.remove(hr),t.style.transform=`translate3d(${f}px, ${y}px, 0)`,t.style.height=`${u+1}px`}));return e.observe(n),e.observe(a),e.observe(s),e.observe(r),()=>e.disconnect()}}),[]);return(0,s.useEffect)((()=>{n&&r&&(l.current=r,c(r))}),[c,n,r]),window.ResizeObserver?(0,d.tZ)("div",{ref:i,css:Zr.columnContainer,className:a?"":mr,children:a&&(0,d.tZ)("div",{css:Zr.buttonContainer,children:(0,d.BX)(m.zxk,{css:Zr.button,type:"link",onClick:t,children:[(0,d.tZ)(m.N9g,{css:Zr.buttonIcon}),(0,d.BX)("div",{css:Zr.caption,children:[(0,d.tZ)(b.Z,{id:"7ASbrt",defaultMessage:"Show more metrics and parameters"})," ",o?(0,d.BX)(d.HY,{children:["(",o,")"]}):null]})]})})}):null},Zr={columnContainer:e=>({width:180,height:0,position:"absolute",border:`1px solid ${e.colors.grey200}`,borderLeft:0,borderTop:0,top:0,left:0,svg:{height:16,width:16},willChange:"transform",transform:"translate3d(0, 0, 0)",".is-minimized &":{display:"flex",alignItems:"center"},"&.is-hidden, .is-out-of-viewport &":{display:"none"}}),buttonContainer:e=>({position:"sticky",top:0,paddingLeft:e.spacing.lg,paddingRight:e.spacing.lg,paddingTop:e.spacing.lg,width:"100%",".is-minimized &":{paddingTop:e.spacing.xs}}),button:{whiteSpace:"pre-wrap",width:"100%"},buttonIcon:e=>({color:e.colors.textSecondary}),caption:e=>({color:e.colors.textSecondary,".is-minimized &":{display:"none"}})},xr=s.memo((e=>{let{experiments:t,searchFacetsState:r,runsData:n,isLoading:a,updateSearchFacets:o,updateViewState:l,onAddColumnClicked:c,rowsData:u}=e;const{isComparingRuns:p}=r,{paramKeyList:h,metricKeyList:g,tagsList:f}=n,[y,v]=(0,s.useState)(),[b,Z]=(0,s.useState)(),x=(0,s.useRef)([]),C=(0,s.useMemo)((()=>i.Z.getVisibleTagKeyList(f)),[f]),S=(0,s.useRef)(null),R=(0,s.useMemo)((()=>u.some((e=>{var t;return null===(t=e.runDateAndNestInfo)||void 0===t?void 0:t.hasExpander}))),[u]),E=(0,s.useCallback)((e=>{let{api:t}=e;const r=t.getSelectedRows().map((e=>{let{runInfo:t}=e;return t.run_uuid}));l({runsSelected:r.reduce(((e,t)=>({...e,[t]:!0})),{})}),x.current=r}),[l]),k=(0,s.useCallback)((e=>{const t=e.api.getSelectedRows();if(x.current&&t.length!==x.current.length){const t=Boolean(e.node.isSelected()),{runDateAndNestInfo:r}=e.data;if(!r)return;const{isParent:n,expanderOpen:a,childrenIds:s}=r;if(n&&a&&s){const r=s;e.api.forEachNode((e=>{const{runInfo:n,runDateAndNestInfo:a}=e.data,s=n.run_uuid;r.includes(s)&&(null!==a&&void 0!==a&&a.childrenIds&&r.push(...a.childrenIds),e.setSelected(t,!1,!0))}))}}}),[]),w=(0,s.useCallback)(((e,t)=>{o({orderByKey:e,orderByAsc:t})}),[o]),B=(0,s.useCallback)((e=>o((t=>{let{runsExpanded:r,...n}=t;return{...n,runsExpanded:{...r,[e]:!r[e]}}}))),[o]),T=(0,s.useCallback)((e=>{o((t=>({...t,runsPinned:t.runsPinned.includes(e)?t.runsPinned.filter((t=>t!==e)):[...t.runsPinned,e]}))),requestAnimationFrame((()=>{if(!y)return;const t=y.getRowNode(e);t&&y.redrawRows({rowNodes:[t]})}))}),[y,o]),I=(0,s.useCallback)((e=>{v(e.api),Z(e.columnApi)}),[]),M=Ke({searchFacetsState:r,onSortBy:w,onExpand:B,compareExperiments:t.length>1,onTogglePin:T,metricKeyList:g,paramKeyList:h,tagKeyList:C,columnApi:b,isComparingRuns:p});(0,s.useEffect)((()=>{y&&(a?y.showLoadingOverlay():(y.hideOverlay(),y.setRowData(u)))}),[y,u,a]);const L=(0,s.useMemo)((()=>(t.length>1?Xe.length:$e.length)+(g.length+h.length+C.length)),[t.length,C.length,g.length,h.length]),D=r.selectedColumns.length>=L,A=(0,s.useMemo)((()=>{const e=r.selectedColumns.filter((e=>Ae(e,q.D5.METRICS)||Ae(e,q.D5.PARAMS))).length,t=g.length+h.length;return Math.max(0,t-e)}),[g.length,h.length,r.selectedColumns]),N=!D&&!p;return(0,s.useLayoutEffect)((()=>{y&&p&&y.sizeColumnsToFit()}),[y,p]),(0,d.BX)("div",{children:[(0,d.BX)("div",{ref:S,className:Bt()("ag-theme-balham ag-grid-sticky",{"ag-grid-expanders-visible":R}),css:Cr.agGridOverrides,children:[(0,d.tZ)(cr,{defaultColDef:Fe,columnDefs:M,domLayout:"autoHeight",rowSelection:"multiple",onGridReady:I,onSelectionChanged:E,rowHeight:32,headerHeight:32,onRowSelected:k,suppressRowClickSelection:!0,suppressColumnMoveAnimation:!0,suppressScrollOnNewData:!0,suppressFieldDotNotation:!0,enableCellTextSelection:!0,components:{agColumnHeader:Y,loadingOverlayComponent:m.$jN,SourceCellRenderer:me,ModelsCellRenderer:ue,VersionCellRenderer:he,DateCellRenderer:te,ExperimentNameCellRenderer:se,PinRowCellRenderer:Te,RunNameCellRenderer:Me},suppressNoRowsOverlay:!0,loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:{showImmediately:!0},getRowId:Ue}),N&&(0,d.tZ)(br,{gridContainerElement:S.current,isInitialized:Boolean(y),onClick:c,visible:!a,moreAvailableParamsAndMetricsColumnCount:A})]}),u.length<1&&!a&&(0,d.tZ)("div",{css:Cr.noResultsWrapper,children:(0,d.tZ)(dr,{})})]})})),Cr={noResultsWrapper:e=>({marginTop:4*-e.spacing.md,textAlign:"center",backgroundColor:e.colors.backgroundPrimary,position:"relative"}),agGridOverrides:e=>{const t=(e=>({rowBackground:e.colors.backgroundPrimary,rowBackgroundHover:`${e.colors.grey600}0A`,rowBackgroundSelected:`${e.colors.grey600}14`,rowBackgroundHoverSelected:`${e.colors.grey600}1F`,columnSortedBy:`${e.colors.blue100}b3`,headerBackground:e.colors.grey100,headerTextColor:"#2E3840",headerGroupTextColor:e.colors.textSecondary,borderColor:e.colors.grey200,headerBorderColor:"transparent",checkboxBorderColor:e.colors.actionDefaultBorderDefault,checkboxBorderColorChecked:e.colors.backgroundPrimary,checkboxBackgroundColorChecked:e.colors.actionPrimaryBackgroundDefault}))(e);return{position:"relative","&.ag-theme-balham":{"--ag-border-color":t.borderColor,"--ag-row-border-color":t.borderColor,"--ag-odd-row-background-color":t.rowBackground,"--ag-row-hover-color":t.rowBackgroundHover,"--ag-selected-row-background-color":t.rowBackgroundSelected,"--ag-header-foreground-color":t.headerTextColor,"--ag-header-background-color":t.headerBackground,"&.ag-grid-sticky .ag-header":{position:"sticky",top:0,zIndex:1},"&.ag-grid-sticky .ag-root":{overflow:"visible"},"&.ag-grid-sticky .ag-root-wrapper":{border:"0",borderRadius:"4px",overflow:"visible"},".ag-header::after":{content:'""',position:"absolute",top:32,left:0,right:0,height:1,backgroundColor:t.borderColor},".ag-cell":{lineHeight:"min(var(--ag-line-height, 30px), 30px)"},".ag-header-cell":{padding:0},".ag-header-cell .ag-checkbox":{padding:"0 7px",borderLeft:"1px solid transparent"},".ag-cell.is-ordered-by, .ag-header-cell > .is-ordered-by":{backgroundColor:t.columnSortedBy},".ag-header-row":{"--ag-border-color":t.headerBorderColor},".ag-header-row.ag-header-row-column-group":{"--ag-header-foreground-color":t.headerGroupTextColor},".ag-row.ag-row-selected.ag-row-hover":{backgroundColor:t.rowBackgroundHoverSelected},".ag-header:not(:hover) .ag-header-cell::after, .ag-header:not(:hover) .ag-header-group-cell::after":{opacity:0},".ag-pinned-left-header":{borderRight:"none"},".ag-overlay-loading-wrapper":{paddingTop:4*e.spacing.md,alignItems:"center"},".ag-overlay-loading-wrapper .ag-react-container":{flex:1,zIndex:1},".ag-center-cols-container":{borderRight:"1px solid var(--ag-border-color)",minHeight:0},".is-checkbox-cell":{display:"flex",alignItems:"center",paddingLeft:7},".ag-header-cell .ag-checkbox .ag-input-wrapper:not(.ag-indeterminate):not(.ag-checked)":{"--ag-checkbox-background-color":t.headerBackground},".ag-selection-checkbox":{marginRight:16},".is-checkbox-cell, .ag-header-cell .ag-checkbox":{".ag-checkbox-input-wrapper::after":{color:t.checkboxBorderColor},".ag-checkbox-input-wrapper.ag-checked":{"--ag-checkbox-background-color":t.checkboxBackgroundColorChecked,"--ag-checkbox-checked-color":t.checkboxBorderColorChecked,"&::after":{color:t.checkboxBorderColorChecked}}}}}}};var Sr=r(88673);class Rr{constructor(){this.runsSelected={},this.hiddenChildRunsSelected={},this.columnSelectorVisible=!1}}const Er=e=>(0,d.tZ)(m.ua7,{placement:"bottom",title:(0,d.tZ)(b.Z,{id:"3ioIKi",defaultMessage:"Loaded child runs are nested under their parents."}),children:e}),kr=(0,l.$j)((e=>{const t=Object.keys(e.entities.runInfosByUuid),r=Object.entries(e.entities.tagsByRunUuid).some((e=>{let[r,n]=e;return t.includes(r)&&Object.keys(n).includes(Be)}));return{containsNestedRuns:r}}))((e=>{let{loadMoreRuns:t,moreRunsAvailable:r,isLoadingRuns:n,containsNestedRuns:a}=e;const s=(0,d.tZ)(m.zxk,{type:"primary",onClick:t,disabled:!r||n,loading:n,children:(0,d.tZ)(b.Z,{id:"9CqEWy",defaultMessage:"Load more"})});return(0,d.tZ)("div",{css:wr.loadMoreButton,children:r?a?Er(s):s:(o=s,(0,d.tZ)(m.ua7,{placement:"bottom",title:(0,d.tZ)(b.Z,{id:"ir96eY",defaultMessage:"No more runs to load."}),children:o}))});var o})),wr={loadMoreButton:e=>({display:"flex",justifyContent:"center",marginTop:e.spacing.md})},Br=e=>e.map(((e,t)=>{var r;let{runInfo:n,metrics:a=[],params:s=[],tags:o={}}=e;return{index:t,runInfo:n,level:0,isPinnable:!(null!==(r=o["mlflow.parentRunId"])&&void 0!==r&&r.value),metrics:a,params:s,tags:o}})),Tr=(e,t,r)=>{if(!e)return[];const n={};for(const a of t)n[`${r}-${a}`]="-";for(const{key:s,value:o}of e)(o||(0,a.isNumber)(o))&&(n[`${r}-${s}`]=o);return n},Ir=e=>{let{experiments:t,modelVersionsByRunUuid:r,runsExpanded:n,nestChildren:a,referenceTime:s,paramKeyList:o,metricKeyList:l,tagKeyList:c,runsPinned:d,runData:u,runUuidsMatchingFilter:p}=e;const m=i.Z.getExperimentNameMap(i.Z.sortExperimentsById(t)),h=a?(e=>{let{runsExpanded:t,runData:r}=e;const n={};r.forEach(((e,t)=>{let{runInfo:r}=e;n[r.run_uuid]=t}));const a=r.map((e=>{let{runInfo:t}=e;return{value:t.run_uuid}}));let s=!1;if(r.forEach(((e,t)=>{let{tags:r}=e;const o=null===r||void 0===r?void 0:r["mlflow.parentRunId"];if(o){const e=n[o.value];void 0!==e&&(s=!0,a[t].parent=a[e])}})),!s)return Br(r);const o={},i=[];a.forEach(((e,t)=>{const{parent:r}=e;void 0!==r&&r.value!==e.value?o[r.value]?o[r.value].push(t):o[r.value]=[t]:i.push(t)}));const l=[],c=new Set,d=(e,n)=>{if(!c.has(e)){const a=r[e].runInfo,s=a.run_uuid,u=Boolean(i.includes(e))||0===n,p={index:e,isParent:!1,hasExpander:!1,level:n,runInfo:a,params:r[e].params||[],metrics:r[e].metrics||[],tags:r[e].tags||{},isPinnable:u};o[s]&&(p.isParent=!0,p.hasExpander=!0,p.expanderOpen=Boolean(t[s]),p.childrenIds=o[s].map((e=>r[e].runInfo.run_uuid))),l.push(p),c.add(e);const m=o[s];m&&t[s]&&m.forEach((e=>{d(e,n+1)}))}};return i.forEach((e=>{d(e,0)})),l})({runData:u,runsExpanded:n}):Br(u),g=[],f=h.map((e=>{const{runInfo:t,isParent:n=!1,hasExpander:a=!1,level:u=0,expanderOpen:p=!1,isPinnable:h=!1,childrenIds:f=[],tags:y,params:v,metrics:b}=e,Z=(b||[]).map((e=>{let{key:t,value:r}=e;return{key:t,value:i.Z.formatMetric(r)}})),x=t.run_uuid,{experiment_id:C}=t,S=m[C],R=i.Z.getUser(t,y),E=i.Z.getDuration(t.start_time,t.end_time),k=i.Z.getRunName(t)||t.run_uuid,w=i.Z.getVisibleTagValues(y).map((e=>{let[t,r]=e;return{key:t,value:r}})),B={startTime:t.start_time,referenceTime:s,experimentId:C,runUuid:x,runStatus:t.status,isParent:n,hasExpander:a,expanderOpen:p,childrenIds:f,level:u},T={registeredModels:r[t.run_uuid]||[],loggedModels:i.Z.getLoggedModelsFromTags(y),experimentId:t.experiment_id,runUuid:t.run_uuid},I={version:i.Z.getSourceVersion(y),name:i.Z.getSourceName(y),type:i.Z.getSourceType(y)},M=d.includes(x),L=g.includes(x);return(M||L)&&g.push(...f),{runUuid:x,runDateAndNestInfo:B,runInfo:t,experimentName:S,experimentId:C,duration:E,user:R,runName:k,tags:y,models:T,version:I,pinnable:h,pinned:M||L,...Tr(v,o,Ee),...Tr(Z,l,ke),...Tr(w,c,we)}}));return[...f.filter((e=>{let{pinned:t}=e;return t})),...f.filter((e=>{let{pinned:t,runUuid:r}=e;return!t&&p.includes(r)}))]},Mr=()=>(0,d.BX)("svg",{width:"auto",viewBox:"0 0 479 235",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:["    ",(0,d.tZ)("path",{d:"M9.41016 233.928L60.5718 214.28L110.299 187.443L164.329 172.586L185.846 144.312L221.707 110.765L248.005 95.43L290.082 73.8645",stroke:"#FF3621",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),"    ",(0,d.tZ)("path",{d:"M9.41016 233.928L42.3472 231.041L74.3607 227.097L105.713 223.545L122.997 220.758L191.095 214.264L301.297 209.945L454.19 206.821",stroke:"#077A9D",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),"    ",(0,d.tZ)("path",{d:"M9.41016 233.928L25.5143 206.821L48.5201 177.777L62.3236 150.024L92.3814 123.562L142.827 88.9139L164.909 52.5656L228.733 22.231",stroke:"#FCA4A1",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),"    ",(0,d.tZ)("line",{x1:"6.84375",y1:"0.286865",x2:"6.84376",y2:"232.637",stroke:"#BDCDDB"}),"    ",(0,d.tZ)("line",{x1:"0.208984",y1:"233.428",x2:"7.87761",y2:"233.428",stroke:"#BDCDDB"}),"    ",(0,d.tZ)("line",{x1:"0.208984",y1:"207.612",x2:"7.87761",y2:"207.612",stroke:"#BDCDDB"}),"    ",(0,d.tZ)("line",{x1:"0.208984",y1:"181.795",x2:"7.87761",y2:"181.795",stroke:"#BDCDDB"}),"    ",(0,d.tZ)("line",{x1:"0.208984",y1:"155.978",x2:"7.87761",y2:"155.978",stroke:"#BDCDDB"}),"    ",(0,d.tZ)("line",{x1:"0.208984",y1:"130.161",x2:"7.87761",y2:"130.161",stroke:"#BDCDDB"}),"    ",(0,d.tZ)("line",{x1:"0.208984",y1:"104.345",x2:"7.87761",y2:"104.345",stroke:"#BDCDDB"}),"    ",(0,d.tZ)("line",{x1:"0.208984",y1:"78.5278",x2:"7.87761",y2:"78.5278",stroke:"#BDCDDB"}),"    ",(0,d.tZ)("line",{x1:"0.208984",y1:"52.7112",x2:"7.87761",y2:"52.7112",stroke:"#BDCDDB"}),"    ",(0,d.tZ)("line",{x1:"0.208984",y1:"26.8945",x2:"7.87761",y2:"26.8945",stroke:"#BDCDDB"}),"    ",(0,d.tZ)("line",{x1:"0.208984",y1:"1.07764",x2:"7.87761",y2:"1.07764",stroke:"#BDCDDB"}),"    ",(0,d.tZ)("line",{x1:"478.73",y1:"233.137",x2:"6.34338",y2:"233.137",stroke:"#BDCDDB"}),"  "]}),Lr=e=>{let{config:t,onDelete:r}=e;return(0,d.BX)("div",{css:Ar.chartEntry,children:[(0,d.BX)("div",{css:Ar.chartEntryTitle,children:[(0,d.BX)(m.ZT$.Title,{level:4,children:["Chart ",t.type," for ",t.metricKey]}),(0,d.BX)(m.h_2.Root,{children:[(0,d.tZ)(m.h_2.Trigger,{asChild:!0,children:(0,d.tZ)(m.zxk,{type:"tertiary",icon:(0,d.tZ)(m.VZO,{})})}),(0,d.BX)(m.h_2.Content,{align:"end",minWidth:100,children:[(0,d.tZ)(m.h_2.Item,{onClick:()=>{},children:"Configure"}),(0,d.tZ)(m.h_2.Item,{onClick:r,children:"Delete"})]})]})]}),(0,d.BX)("div",{css:e=>({fontSize:10,color:e.colors.grey600}),children:["UUID: ",t.uuid]}),(0,d.tZ)(m.LZC,{size:"md"}),(0,d.tZ)(Mr,{})]})},Dr=e=>{let{chartsConfig:t,onRemoveChart:r}=e;return(0,d.tZ)("div",{css:Ar.chartsWrapper,children:t.map((e=>(0,d.tZ)(Lr,{config:e,onDelete:()=>r(e)},e.uuid)))})},Ar={chartsWrapper:e=>({display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gap:e.spacing.md}),chartEntryTitle:e=>({display:"grid",gridTemplateColumns:"1fr auto auto",height:e.general.heightSm,alignItems:"center"}),chartEntry:e=>({backgroundColor:e.colors.backgroundPrimary,padding:e.spacing.md,border:`1px solid ${e.colors.border}`,borderRadius:e.general.borderRadiusBase})};var Nr=r(51554),Or=r(61231);const _r={chartWrapper:{width:"100%",height:"100%",overflow:"hidden",fontSize:0,lineHeight:0},chart:{width:"100%",height:"100%"}},Pr={t:0,b:48,r:0,l:48,pad:0},Ur={bgcolor:"white",bordercolor:"#ccc",font:{color:"black"}},$r={displaylogo:!1,scrollZoom:!0},Xr=s.memo((e=>{let{runsData:t,xAxis:r,yAxis:n,markerSize:o=10,className:i,margin:l=Pr,onUpdate:c,onHover:u,onUnhover:p,width:m,height:h}=e;const g=(0,Nr.u)(),{layoutHeight:f,layoutWidth:y,setContainerDiv:v,isDynamicSizeSupported:b}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;const[t,r]=(0,s.useState)(void 0),[n,o]=(0,s.useState)(void 0),i=Boolean(window.ResizeObserver),l=(0,s.useCallback)(((e,t)=>{r(e),o(t)}),[]),c=(0,s.useMemo)((()=>(0,a.throttle)(l,e,{leading:!0})),[l,e]),[d,u]=(0,s.useState)(null);return(0,s.useEffect)((()=>{let e=!1;if(!d||!window.ResizeObserver)return;const t=new ResizeObserver((t=>{let[r]=t;e||c(r.contentRect.width,r.contentRect.height)}));return t.observe(d),()=>{e=!0,t.disconnect()}}),[d,c]),{setContainerDiv:u,layoutWidth:t,layoutHeight:n,isDynamicSizeSupported:i}}(),Z=(0,s.useMemo)((()=>{const e=[],a=[],s=[],i=[];for(const o of t){var l,c;const{runInfo:{run_uuid:t,run_name:d},metrics:u,params:p,color:m}=o,h="METRIC"===r.type?u:p,f="METRIC"===n.type?u:p,y=(null===h||void 0===h||null===(l=h[r.key])||void 0===l?void 0:l.value)||void 0,v=(null===f||void 0===f||null===(c=f[n.key])||void 0===c?void 0:c.value)||void 0;y&&v&&(e.push(y),a.push(v),s.push(m||g.colors.primary),i.push([t,d||t]))}return[{x:e,y:a,customdata:i,hovertemplate:"<b>%{customdata[1]}:</b><br><b>%{xaxis.title.text}:</b> %{x:.2f}<br><b>%{yaxis.title.text}:</b> %{y:.2f}<br><extra></extra>",hoverlabel:Ur,type:"scattergl",mode:"markers",marker:{size:o,color:s}}]}),[t,r,n,g,o]),[x,C]=(0,s.useState)({width:m||y,height:h||f,margin:l,xaxis:{title:r.key},yaxis:{title:n.key}});(0,s.useEffect)((()=>{C((e=>({...e,width:m||y,height:h||f,margin:l,xaxis:{...e.xaxis,title:r.key},yaxis:{...e.yaxis,title:n.key}})))}),[y,f,l,r.key,n.key,m,h]);const S=(0,s.useCallback)((e=>{var r;let{points:n}=e;const a=t[null===(r=n[0])||void 0===r?void 0:r.pointIndex];null!==a&&void 0!==a&&a.runInfo&&(null===u||void 0===u||u(a.runInfo.run_uuid))}),[u,t]);return(0,d.tZ)("div",{css:_r.chartWrapper,className:i,ref:v,children:(0,d.tZ)(Or.L,{data:Z,useResizeHandler:!b,css:_r.chart,layout:x,config:$r,onUpdate:c,onHover:S,onUnhover:p})})})),Kr=e=>{let{onCancel:t,onSubmit:r}=e;const[n,a]=(0,s.useState)({type:"BAR",metricKey:"metric_1"});return(0,d.tZ)(m.u_l,{visible:!0,onCancel:t,onOk:()=>r(n),title:"[TODO] Add new chart",cancelText:"Cancel",okText:"Confirm",size:"wide",children:(0,d.BX)("div",{css:Fr.wrapper,children:[(0,d.BX)("div",{children:[(0,d.BX)("div",{css:Fr.field,children:[(0,d.tZ)("span",{children:"Type:"}),(0,d.tZ)(m.IIB,{value:n.type,onChange:e=>a((t=>({...t,type:e.target.value})))})]}),(0,d.BX)("div",{css:Fr.field,children:[(0,d.tZ)("span",{children:"Metric key:"}),(0,d.tZ)(m.IIB,{value:n.metricKey,onChange:e=>a((t=>({...t,metricKey:e.target.value})))})]})]}),(0,d.tZ)("div",{css:Fr.chartWrapper,children:(0,d.tZ)(Xr,{runsData:[],xAxis:{key:"TODO",type:"METRIC"},yAxis:{key:"TODO",type:"METRIC"}})})]})})},Fr={wrapper:{display:"grid",gridTemplateColumns:"200px 1fr",gap:32},field:{display:"grid",gridTemplateColumns:"80px 1fr",marginBottom:16},chartWrapper:{height:400}};var zr=r(42218);const Vr={controlsWrapper:e=>({marginBottom:e.spacing.md,display:"flex",justifyContent:"flex-end"}),wrapper:e=>({marginLeft:-1,position:"relative",backgroundColor:e.colors.backgroundSecondary,padding:e.spacing.md,borderLeft:`1px solid ${e.colors.border}`,zIndex:1})},Wr=(0,l.$j)((e=>{let{entities:t}=e;const{paramsByRunUuid:r,latestMetricsByRunUuid:n}=t;return{paramsByRunUuid:r,metricsByRunUuid:n}}),void 0,void 0,{areStatesEqual:(e,t)=>e.entities===t.entities})((e=>{let{comparedRuns:t,isLoading:r,searchFacetsState:n,updateSearchFacets:a}=e;const[o,i]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1);(0,s.useEffect)((()=>{o||r||i(!0)}),[o,r]);const u=(0,s.useCallback)((()=>{c(!0)}),[]);return o?(0,d.BX)("div",{css:Vr.wrapper,children:[(0,d.tZ)("div",{css:Vr.controlsWrapper,children:(0,d.BX)(m.h_2.Root,{children:[(0,d.tZ)(m.h_2.Trigger,{asChild:!0,children:(0,d.tZ)(m.zxk,{icon:(0,d.tZ)(m.pOD,{}),children:"Add"})}),(0,d.BX)(m.h_2.Content,{align:"end",children:[(0,d.BX)(m.h_2.Group,{children:[(0,d.tZ)(m.h_2.Label,{children:"Advanced Comparison"}),(0,d.BX)(m.h_2.Item,{onClick:u,children:[(0,d.tZ)(m.h_2.IconWrapper,{children:(0,d.tZ)(m.y3G,{})}),"Scatter plot"]}),(0,d.BX)(m.h_2.Item,{onClick:u,children:[(0,d.tZ)(m.h_2.IconWrapper,{children:(0,d.tZ)(m.bZv,{})}),"Contour plot"]})]}),(0,d.BX)(m.h_2.Group,{children:[(0,d.tZ)(m.h_2.Label,{children:"Metrics"}),(0,d.BX)(m.h_2.Item,{onClick:u,children:[(0,d.tZ)(m.h_2.IconWrapper,{children:(0,d.tZ)(m.eJP,{})}),"(TODO) Metric 1"]})]})]})]})}),(0,d.tZ)(Dr,{comparedRuns:t,chartsConfig:n.compareRunCharts,onRemoveChart:e=>{a((t=>({...t,compareRunCharts:t.compareRunCharts.filter((t=>t.uuid!==e.uuid))})))}}),l&&(0,d.tZ)(Kr,{onSubmit:e=>{const t={...e,uuid:(0,zr.Fs)()};a((e=>({...e,compareRunCharts:[...e.compareRunCharts,t]}))),c(!1)},onCancel:()=>c(!1)})]}):(0,d.tZ)("div",{css:Vr.wrapper,children:(0,d.tZ)(m.OdW,{})})})),Hr=()=>{const e=new Date;return e.setMilliseconds(0),e},jr=s.memo((e=>{const{experiments:t,runsData:r}=e,{searchFacetsState:n,updateSearchFacets:a,fetchExperimentRuns:o,isLoadingRuns:l,loadMoreRuns:c,moreRunsAvailable:u}=vt(),[p,m]=(0,s.useState)([]),[h,g]=(0,s.useState)(new Rr);(0,s.useEffect)((()=>{o()}),[]);const f=(0,s.useCallback)((e=>g((t=>({...t,...e})))),[]),y=(0,s.useCallback)((()=>{f({columnSelectorVisible:!0})}),[f]),{orderByKey:v,searchFilter:b,runsExpanded:Z,runsPinned:x,isComparingRuns:C}=n,S=(0,s.useMemo)((()=>!v&&!b||v===q.XZ.DATE),[v,b]),[R,E]=(0,s.useState)(Hr),{paramKeyList:k,metricKeyList:w,tagsList:B,modelVersionsByRunUuid:T,paramsList:I,metricsList:M,runInfos:L,runUuidsMatchingFilter:D}=r;(0,s.useEffect)((()=>{E(Hr)}),[L]);const A=(0,s.useMemo)((()=>i.Z.getVisibleTagKeyList(B)),[B]);return(0,s.useEffect)((()=>{if(l)return;const e=Ir({experiments:t,paramKeyList:k,metricKeyList:w,modelVersionsByRunUuid:T,runsExpanded:Z,tagKeyList:A,nestChildren:S,referenceTime:R,runData:L.map(((e,t)=>({runInfo:e,params:I[t],metrics:M[t],tags:B[t]}))),runUuidsMatchingFilter:D,runsPinned:x});m(e)}),[l,t,w,M,T,k,I,L,Z,B,A,S,R,x,D]),(0,d.BX)(d.HY,{children:[(0,d.tZ)(or,{viewState:h,updateViewState:f,runsData:r,searchFacetsState:n,updateSearchFacets:a,visibleRowsCount:p.length}),(0,d.BX)("div",{css:qr.createRunsTableWrapper(C),children:[(0,d.tZ)(xr,{experiments:t,runsData:r,searchFacetsState:n,viewState:h,isLoading:l,updateSearchFacets:a,updateViewState:f,onAddColumnClicked:y,rowsData:p}),C&&(0,d.tZ)(Wr,{isLoading:l,comparedRuns:p,metricKeyList:r.metricKeyList,paramKeyList:r.paramKeyList,searchFacetsState:n,updateSearchFacets:a})]}),(0,d.tZ)(kr,{isLoadingRuns:l,loadMoreRuns:c,moreRunsAvailable:u})]})})),qr={createRunsTableWrapper:e=>({display:"grid",gridTemplateColumns:e?"260px 1fr":"1fr"})},Yr={searchRunsApi:n.ht,loadMoreRunsApi:n.mx,searchRunsPayload:n.Yl,searchModelVersionsApi:Sr.nI},Gr=(0,l.$j)(((e,t)=>({runsData:j(e,t)})),void 0,void 0,{areStatesEqual:(e,t)=>e.entities===t.entities})(jr),Qr=e=>{const{searchFacetsState:t}=vt();return(0,d.tZ)(Gr,{...e,modelVersionFilter:t.modelVersionFilter,lifecycleFilter:t.lifecycleFilter})},Jr=e=>(0,d.tZ)(yt,{actions:Yr,children:(0,d.tZ)(Qr,{...e})}),en=()=>{const e=tt(),t=(r=e,(0,l.v9)((e=>r.map((t=>e.entities.experimentsById[t])).filter(Boolean)),((e,t)=>(0,a.isEqual)(e,t))));var r;const[n]=t,{fetchExperiments:o,isLoadingExperiment:i,requestError:c}=w();(0,s.useEffect)((()=>{o(e)}),[o,e]);const u=e.length>1;return c&&c.getErrorCode()===h.SM.PERMISSION_DENIED?(0,d.tZ)(v,{errorMessage:c.getMessageField()}):c&&c.getErrorCode()===h.SM.RESOURCE_DOES_NOT_EXIST?(0,d.tZ)(g.Z,{}):i||!n?(0,d.tZ)(m.OdW,{active:!0}):(0,d.BX)(d.HY,{children:[u?(0,d.tZ)(z,{experiments:t}):(0,d.BX)(d.HY,{children:[(0,d.tZ)(F,{experiment:n}),(0,d.tZ)(L,{}),(0,d.tZ)(x,{experiment:n}),(0,d.tZ)(B,{experiment:n})]}),(0,d.tZ)(Jr,{experiments:t})]})};const tn={setExperimentTagApi:n.Yp,getExperimentApi:n.eu,setCompareExperiments:n.MY},rn=()=>(0,d.tZ)(p,{actions:tn,children:(0,d.tZ)(en,{})});var nn=rn}}]);
//# sourceMappingURL=425.b20e5cb2.chunk.js.map